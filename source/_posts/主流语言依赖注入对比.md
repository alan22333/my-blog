---
title: ä¸»æµè¯­è¨€ä¾èµ–æ³¨å…¥å¯¹æ¯”
description: 'Javaã€Go å’Œ C++ ä¸‰ç§ä¸»æµè¯­è¨€ä¸­ä¾èµ–æ³¨å…¥çš„å®ç°æ–¹å¼ï¼Œå¹¶é€šè¿‡ log å’Œ db ä¸¤ä¸ªå¸¸è§ç»„ä»¶ä½œä¸ºä¾‹å­æ¥å¯¹æ¯”'
tags: []
toc: false
date: 2025-06-06 14:36:49
categories:
---

# ğŸš€ Javaã€Goã€C++ å®è·µåˆ†æï¼ˆä»¥ log å’Œ db ä¸ºä¾‹ï¼‰

åœ¨ä¸åŒè¯­è¨€ä¸­ï¼Œä¾èµ–æ³¨å…¥çš„å®ç°æ–¹å¼å¤§ç›¸å¾„åº­ï¼šJava å€¾å‘äºä½¿ç”¨æ¡†æ¶ï¼ŒGo å€¾å‘äºæ˜¾ç¤ºä¼ é€’ï¼Œè€Œ C++ å€¾å‘äºæ³›å‹æˆ–å‡½æ•°æŒ‡é’ˆå½¢å¼çš„æ³¨å…¥ã€‚

---

## ğŸ§± åœºæ™¯è®¾å®š

æˆ‘ä»¬å‡è®¾æœ‰ä¸€ä¸ª `UserService` æœåŠ¡ï¼Œå®ƒä¾èµ–ä¸€ä¸ªæ—¥å¿—ç»„ä»¶ï¼ˆLoggerï¼‰å’Œä¸€ä¸ªæ•°æ®åº“ç»„ä»¶ï¼ˆDBï¼‰ã€‚æˆ‘ä»¬å¸Œæœ›é€šè¿‡ä¾èµ–æ³¨å…¥å°†è¿™ä¸¤ä¸ªä¾èµ–æä¾›ç»™å®ƒï¼Œè€Œä¸åœ¨ `UserService` å†…éƒ¨ç›´æ¥åˆ›å»ºå®ƒä»¬ã€‚

---

## â˜• Javaï¼šä½¿ç”¨ Spring æ¡†æ¶çš„æ„é€ å‡½æ•°æ³¨å…¥

Java çš„ä¾èµ–æ³¨å…¥å‡ ä¹éƒ½æ˜¯é€šè¿‡æ¡†æ¶ï¼ˆå¦‚ Springï¼‰å®ç°çš„ï¼Œä¸»æµæ–¹å¼æ˜¯æ„é€ å™¨æ³¨å…¥æˆ–æ³¨è§£æ³¨å…¥ã€‚

```java
@Component
public class UserService {
    private final Logger logger;
    private final Database db;

    @Autowired
    public UserService(Logger logger, Database db) {
        this.logger = logger;
        this.db = db;
    }

    public void createUser(String name) {
        logger.log("Creating user: " + name);
        db.saveUser(name);
    }
}
```

é…ç½®æ–¹å¼ï¼ˆXML æˆ–æ³¨è§£ï¼‰äº¤ç”± Spring å®¹å™¨ç®¡ç†ï¼š

```java
@Configuration
public class AppConfig {
    @Bean
    public Logger logger() {
        return new ConsoleLogger();
    }

    @Bean
    public Database database() {
        return new MySQLDatabase();
    }
}
```

âœ… **ä¼˜ç‚¹**ï¼š

* æ¡†æ¶è‡ªåŠ¨ç®¡ç†ä¾èµ–ï¼Œæ˜“ç”¨ä¸”å¼ºå¤§
* æ”¯æŒç”Ÿå‘½å‘¨æœŸç®¡ç†ã€ä½œç”¨åŸŸã€AOP ç­‰

âš ï¸ **ç¼ºç‚¹**ï¼š

* å­¦ä¹ æ›²çº¿è¾ƒé™¡
* é¡¹ç›®åˆå§‹åŒ–æˆæœ¬é«˜

---

## ğŸ¦« Goï¼šæ˜¾ç¤ºæ„é€ å‡½æ•°æ³¨å…¥ï¼ˆæ— æ¡†æ¶ï¼Œæ¸…æ™°å¯æ§ï¼‰

Go å€¾å‘äºä½¿ç”¨æ˜¾ç¤ºæ³¨å…¥ï¼ˆmanual injectionï¼‰ï¼Œéµå¾ªç»„åˆä¼˜äºç»§æ‰¿çš„æ€æƒ³ã€‚

```go
type Logger interface {
    Log(msg string)
}

type DB interface {
    SaveUser(name string)
}

type UserService struct {
    logger Logger
    db     DB
}

func NewUserService(logger Logger, db DB) *UserService {
    return &UserService{logger: logger, db: db}
}

func (u *UserService) CreateUser(name string) {
    u.logger.Log("Creating user: " + name)
    u.db.SaveUser(name)
}
```

åˆ›å»ºæ—¶æ³¨å…¥ï¼š

```go
func main() {
    logger := &ConsoleLogger{}
    db := &MySQL{}
    userService := NewUserService(logger, db)

    userService.CreateUser("Alice")
}
```

âœ… **ä¼˜ç‚¹**ï¼š

* æ— é­”æ³•ï¼Œä¾èµ–æ¸…æ™°å¯è§
* æ›´æ˜“äºæµ‹è¯•å’Œç»´æŠ¤

âš ï¸ **ç¼ºç‚¹**ï¼š

* é¡¹ç›®è§„æ¨¡å˜å¤§åéœ€è¦æ‰‹åŠ¨ç»„ç»‡æ„é€ å™¨
* DI é€»è¾‘å®¹æ˜“æ•£ä¹±

ğŸ› ï¸ Go é¡¹ç›®ä¸­å¸¸ç”¨ wireã€fxã€dig ç­‰å·¥å…·å®ç°è‡ªåŠ¨ä¾èµ–æ³¨å…¥ï¼Œä½†æœ¬è´¨è¿˜æ˜¯æ„é€ å‡½æ•°æ³¨å…¥ã€‚

---

## ğŸ§  C++ï¼šæ³›å‹ & å‡½æ•°æ³¨å…¥ï¼ˆæ¨¡æ¿ + std::functionï¼‰

C++ ä¸­æ²¡æœ‰å†…å»º DI æ¡†æ¶ï¼Œå¸¸ç”¨ä¸¤ç§æ–¹å¼ï¼š

1. æ„é€ å‡½æ•°æ³¨å…¥ï¼ˆç»å…¸æ–¹å¼ï¼‰
2. å‡½æ•°å¼æ³¨å…¥ï¼ˆé€‚åˆæ³¨å…¥ç­–ç•¥æˆ–è¡Œä¸ºï¼‰

```cpp
#include <iostream>
#include <functional>

class Logger {
public:
    virtual void log(const std::string& msg) = 0;
};

class ConsoleLogger : public Logger {
public:
    void log(const std::string& msg) override {
        std::cout << "[LOG] " << msg << std::endl;
    }
};

class DB {
public:
    virtual void saveUser(const std::string& name) = 0;
};

class MySQL : public DB {
public:
    void saveUser(const std::string& name) override {
        std::cout << "Saving user: " << name << std::endl;
    }
};

class UserService {
public:
    UserService(Logger* logger, DB* db)
        : logger_(logger), db_(db) {}

    void createUser(const std::string& name) {
        logger_->log("Creating user: " + name);
        db_->saveUser(name);
    }

private:
    Logger* logger_;
    DB* db_;
};

int main() {
    ConsoleLogger logger;
    MySQL db;

    UserService service(&logger, &db);
    service.createUser("Bob");
}
```

âœ… **ä¼˜ç‚¹**ï¼š

* çµæ´»ã€æ— å¤–éƒ¨ä¾èµ–
* å¯è½»æ¾æ³¨å…¥ä¸åŒå®ç°ç”¨äºæµ‹è¯•æˆ–æ‰©å±•

âš ï¸ **ç¼ºç‚¹**ï¼š

* ç¼ºå°‘ç»Ÿä¸€ç®¡ç†æœºåˆ¶
* ç”Ÿå‘½å‘¨æœŸç®¡ç†éœ€è‡ªè¡Œå¤„ç†ï¼ˆè£¸æŒ‡é’ˆ vs æ™ºèƒ½æŒ‡é’ˆï¼‰

---

## ğŸ§¾ æ€»ç»“å¯¹æ¯”è¡¨

| ç‰¹æ€§     | Java (Spring) | Go            | C++           |
| ------ | ------------- | ------------- | ------------- |
| æ¡†æ¶æ”¯æŒ   | å¼ºï¼Œè‡ªåŠ¨æ³¨å…¥        | æ— /å¼±ï¼ˆdigã€wireï¼‰ | åŸºæœ¬æ—            |
| DI ç±»å‹  | æ³¨è§£ã€XMLã€æ„é€ å™¨æ³¨å…¥  | æ„é€ å™¨æ³¨å…¥         | æ„é€ å™¨æ³¨å…¥ / å‡½æ•°æ³¨å…¥  |
| ç”Ÿå‘½å‘¨æœŸç®¡ç† | è‡ªåŠ¨            | æ‰‹åŠ¨            | æ‰‹åŠ¨ï¼ˆæ³¨æ„æŒ‡é’ˆï¼‰      |
| å­¦ä¹ æˆæœ¬   | ä¸­é«˜            | ä½             | ä¸­             |
| æµ‹è¯•å‹å¥½æ€§  | å¼º             | å¼º             | ä¸­             |
| æ¨èé¡¹ç›®è§„æ¨¡ | ä¸­å¤§å‹ä¼ä¸šåº”ç”¨       | ä¸­å°å‹/å¾®æœåŠ¡       | åµŒå…¥å¼/æ€§èƒ½æ•æ„Ÿ/åº•å±‚ç³»ç»Ÿ |

---

## ğŸ ç»“è¯­

ä¾èµ–æ³¨å…¥æ˜¯ä¸€ç§æå‡ä»£ç çµæ´»æ€§ã€è§£è€¦æ€§å’Œæµ‹è¯•èƒ½åŠ›çš„é‡è¦æ‰‹æ®µã€‚ä¸åŒè¯­è¨€æœ‰ä¸åŒå®ç°é£æ ¼ï¼š

* Java å€¾å‘äº**æ¡†æ¶é©±åŠ¨**ï¼Œè‡ªåŠ¨æ³¨å…¥ã€ä¼ä¸šçº§å¼€å‘å¸¸ç”¨ï¼›
* Go å€¾å‘äº**æ˜¾ç¤ºæ³¨å…¥**ï¼Œç¬¦åˆå…¶ç®€æ´å“²å­¦ï¼›
* C++ å€¾å‘äº**çµæ´»æ³¨å…¥**ï¼Œé€‚åˆæ€§èƒ½æ•æ„Ÿåœºæ™¯ï¼›